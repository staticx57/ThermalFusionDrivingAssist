{
  "_comment": "Thermal Inspection Fusion Tool v2.0 - Configuration File",
  "_version": "2.0.0",
  "_last_updated": "2025-11-21",

  "gui": {
    "theme": "dark",
    "theme_mode": "auto",
    "developer_mode": false,
    "show_info_panel": true,
    "window": {
      "width": 1280,
      "height": 720,
      "fullscreen": false,
      "analysis_panel_width": 350
    }
  },

  "theme_auto": {
    "enabled": true,
    "method_priority": ["ambient", "astronomical", "time"],
    "check_interval": 10.0,
    "time_based": {
      "day_start_hour": 7,
      "night_start_hour": 19
    },
    "astronomical": {
      "enabled": true,
      "latitude": 37.7749,
      "longitude": -122.4194
    },
    "ambient": {
      "enabled": true,
      "threshold": 80,
      "hysteresis": 15
    }
  },

  "camera": {
    "thermal": {
      "width": 640,
      "height": 512,
      "fps": 60,
      "device_id": null,
      "backend": "auto",
      "buffer_flush_enabled": false,
      "retry_interval": 3.0,
      "auto_retry": true
    },
    "rgb": {
      "enabled": true,
      "camera_type": "auto",
      "width": 640,
      "height": 480,
      "fps": 30,
      "retry_interval": 100,
      "auto_retry": true
    },
    "calibration_file": null
  },

  "display": {
    "view_mode": "fusion",
    "thermal_palette": "ironbow"
  },

  "fusion": {
    "mode": "alpha_blend",
    "alpha": 0.5,
    "intensity": 0.5,
    "priority": "thermal",
    "edge_detection": {
      "enabled": true,
      "weight": 0.5,
      "color": [0, 0, 255]
    },
    "edge_enhanced": {
      "thermal_priority_edge_color": [255, 255, 0],
      "rgb_priority_edge_color": [0, 0, 255]
    },
    "thermal_overlay": {
      "hot_threshold_percentile": 70,
      "thermal_weight": 0.7
    },
    "picture_in_picture": {
      "position": "top-right",
      "size": 0.25,
      "margin": 10,
      "border_width": 2
    }
  },

  "thermal_analysis": {
    "temperature_unit": "celsius",
    "hot_spot_threshold": 0.85,
    "cold_spot_threshold": 0.15,
    "hot_spot_absolute_temp": null,
    "cold_spot_absolute_temp": null,
    "gradient_sensitivity": 1.0,
    "anomaly_detection": {
      "enabled": true,
      "rapid_change_threshold": 5.0,
      "rapid_change_window": 10,
      "gradient_anomaly_threshold": 3.0,
      "statistical_outlier_sigma": 3.0,
      "min_confidence": 0.7
    },
    "trend_tracking": {
      "enabled": true,
      "window_size": 60,
      "prediction_enabled": true,
      "prediction_horizon": 10
    }
  },

  "roi": {
    "auto_detect": {
      "enabled": true,
      "temperature_threshold": {
        "enabled": true,
        "detect_hot": true,
        "detect_cold": true,
        "percentile_threshold": 0.85,
        "min_area": 500,
        "max_rois": 10
      },
      "temperature_gradient": {
        "enabled": true,
        "threshold_multiplier": 2.0,
        "min_area": 500,
        "max_rois": 10
      },
      "motion_triggered": {
        "enabled": true,
        "margin": 20,
        "min_confidence": 0.5,
        "max_rois": 5
      },
      "edge_clustering": {
        "enabled": true,
        "min_edges": 100,
        "cluster_epsilon": 30,
        "min_cluster_size": 3,
        "max_rois": 10
      }
    },
    "manual_draw": {
      "default_type": "rectangle",
      "snap_to_grid": false,
      "grid_size": 10
    },
    "visualization": {
      "rectangle_color": [0, 255, 0],
      "polygon_color": [255, 255, 0],
      "ellipse_color": [255, 128, 0],
      "circle_color": [128, 0, 255],
      "selected_color": [0, 255, 255],
      "line_thickness": 2,
      "label_font_scale": 0.5
    },
    "persistence": {
      "auto_save": false,
      "save_path": "rois/",
      "default_filename": "inspection_rois.json"
    }
  },

  "palette": {
    "default_global": "ironbow",
    "auto_contrast": true,
    "contrast_min": 0.0,
    "contrast_max": 1.0,
    "gamma": 1.0,
    "roi_overrides_enabled": true,
    "presets": {
      "circuit_board_inspection": {
        "global": "ironbow",
        "hot_components": "white_hot",
        "general_areas": "rainbow_hc"
      },
      "residential_inspection": {
        "global": "rainbow",
        "thermal_leaks": "lava",
        "moisture_areas": "arctic"
      },
      "scientific_analysis": {
        "global": "viridis",
        "hot_regions": "plasma",
        "cold_regions": "cividis"
      }
    }
  },

  "motion_detection": {
    "enabled": true,
    "threshold": 20,
    "min_area": 400,
    "max_area_ratio": 0.6,
    "persistence_frames": 2,
    "gaussian_blur_kernel": 5
  },

  "edge_detection": {
    "enabled": true,
    "canny_threshold_low": 50,
    "canny_threshold_high": 150,
    "gaussian_blur_kernel": 7,
    "gaussian_blur_sigma": 1.5,
    "min_area_percent": 0.1,
    "max_area_percent": 30.0
  },

  "recording": {
    "enabled": false,
    "output_path": "recordings/",
    "filename_pattern": "inspection_%Y%m%d_%H%M%S",
    "video_codec": "mp4v",
    "fps": 30,
    "compression_quality": 90,
    "save_thermal": true,
    "save_rgb": true,
    "save_fusion": true,
    "save_roi_metadata": true,
    "metadata_format": "json",
    "auto_split_size_mb": 500
  },

  "playback": {
    "default_speed": 1.0,
    "frame_step": 1,
    "loop": false,
    "auto_load_roi_metadata": true
  },

  "snapshot": {
    "output_path": "snapshots/",
    "filename_pattern": "snapshot_%Y%m%d_%H%M%S",
    "format": "png",
    "quality": 95,
    "include_overlays": true,
    "include_rois": true,
    "include_analysis": true,
    "save_metadata": true
  },

  "performance": {
    "device": "cuda",
    "fps_smoothing_window": 60,
    "target_fps": {
      "x86": 30,
      "jetson": 20
    },
    "monitor_update_interval": 1.0,
    "stats_print_interval": 100,
    "detection_queue_size": 2
  },

  "platform": {
    "force_platform": null,
    "vpi_backend_priority": ["CUDA", "PVA", "VIC", "CPU"]
  },

  "logging": {
    "level": "INFO",
    "file": "thermal_inspection_debug.log",
    "enable_console": true,
    "enable_file": true,
    "max_file_size_mb": 10,
    "backup_count": 5
  },

  "export": {
    "csv": {
      "delimiter": ",",
      "include_header": true,
      "timestamp_format": "%Y-%m-%d %H:%M:%S.%f"
    },
    "pdf": {
      "page_size": "A4",
      "orientation": "portrait",
      "include_images": true,
      "include_statistics": true,
      "include_trends": true
    }
  }
}
